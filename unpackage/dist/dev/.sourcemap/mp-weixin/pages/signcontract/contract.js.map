{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yangqinglong/Documents/zz/Y-land/pages/signcontract/contract.vue?b89a","webpack:////Users/yangqinglong/Documents/zz/Y-land/pages/signcontract/contract.vue?df53","webpack:////Users/yangqinglong/Documents/zz/Y-land/pages/signcontract/contract.vue?3336","webpack:////Users/yangqinglong/Documents/zz/Y-land/pages/signcontract/contract.vue?2bc9","uni-app:///pages/signcontract/contract.vue","webpack:////Users/yangqinglong/Documents/zz/Y-land/pages/signcontract/contract.vue?480a","webpack:////Users/yangqinglong/Documents/zz/Y-land/pages/signcontract/contract.vue?d96f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","visible","ctx","points","width","height","autophoto","deid","ruletst","iden","land_id","state","onLoad","console","that","id","type","uni","success","methods","singint","tempPoint","getZlContractInfo","url","method","header","signing","title","content","signcon","photodata","duration","setTimeout","delta","icon","touchstart","X","Y","touchmove","touchend","draw","handleCancel","handleReset","handleConfirm","canvasId","fail","uploadphoto","filePath","name"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,iBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACa;;;AAGpE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAs0B,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8C11B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;IACAC;IACAC;IACA;IACA;IACA;IACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACAC;QACAJ;QACAA;MACA;IACA;IACA;EACA;EACAK;IACAC;MACAC;MACA;IACA;IACAC;MAAA;MACA;QACAC;QACAC;QACAC;UACA;QACA;QACAzB;UACAe;QACA;MACA;QACAF;QACA;UACA;UACAA;QACA;UACA;QACA;MACA;IACA;IACAa;MACAb;MACA;MACAI;QACAU;QACAC;QACAV;UAAA;UACA;YACA;cACAJ;YACA;cACA;cACA;cACA;gBACAe;gBACAC;cACA;gBACAD;gBACAC;cACA;cACAhB;gBACAS;gBACAC;gBACAC;kBACA;gBACA;gBACAzB;kBACAU;gBAAA,GACAoB;cAEA;gBACA;kBACA;kBACAb;oBACAU;oBACAI;kBACA;kBACAC;oBACAf;sBAAA;sBACAgB;oBACA;kBACA;kBACA;kBACA;kBACA;gBACA;kBACAhB;oBACAU;oBACAO;kBACA;kBACA;gBACA;cACA;YACA;UACA;YACApB;YACAD;UACA;QACA;MACA;IAEA;IAOA;IACAsB;MACA;MACA;MACA;QACAC;QACAC;MACA;;MAEA;AACA;AACA;MACA;;MAEA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;QACAF;QACAC;MACA;MACA;MACA;MACA;QACA;MACA;;MACAhB;IACA;IAEA;IACAkB;MACA;IACA;IAEA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA3B;MACAA;MACAO;MACA;MACA;MACA;MACA;IACA;;IAEA;IACAqB;MACA7B;MACAC;MACAA;MACAO;IACA;IAEA;IACAsB;MACA;QACA1B;UACAU;UACAO;UACAH;QACA;QACA;MACA;MACAlB;MACAI;QACA2B;QACA1B;UAAA;UACA;UACAL;UACA;UACAX;UACAA;UACAA;UACAA;UACA8B;YAEA;YACAf;cACA2B;cACA1B;gBACAL;gBACA;gBACA;kBACA;kBACAC;gBAEA;cACA;cACA+B;gBACAhC;cACA;YACA,GACA,OACA;UACA;QACA;MACA;IACA;IACAiC;MACA;MACA7B;QACAM;QACAwB;QACAC;QACA9B;UACA;UACA;UACA;YACAJ;YACAA;YACAD;UACA;YACAA;YACAC;UACA;QACA;MACA;IACA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;ACrUA;AAAA;AAAA;AAAA;AAAmrC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;;ACAvsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/signcontract/contract.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/signcontract/contract.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./contract.vue?vue&type=template&id=d032c4ae&\"\nvar renderjs\nimport script from \"./contract.vue?vue&type=script&lang=js&\"\nexport * from \"./contract.vue?vue&type=script&lang=js&\"\nimport style0 from \"./contract.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/signcontract/contract.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contract.vue?vue&type=template&id=d032c4ae&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contract.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contract.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"Mask\" v-if=\"visible\"></view>\r\n\t\t<view v-if=\"!visible\">\r\n\t\t\t<view class=\"title\">{{ruletst.name}}</view>\r\n\t\t\t<rich-text :nodes=\"ruletst.content\"></rich-text>\r\n\t\t</view>\r\n\t\t<view class=\"graph\">\r\n\t\t\t<view class=\"flex l_signature\">\r\n\t\t\t\t<view>甲方:</view>\r\n\t\t\t\t<image :src=\"ruletst.l_signature\" mode=\"scaleToFill\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex signature\">\r\n\t\t\t\t<view>乙方:</view>\r\n\t\t\t\t<image :src=\"ruletst.signature\" mode=\"scaleToFill\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view @click=\"singint()\" style=\"display: flex;align-items: center;margin: 20rpx auto auto 460rpx;\" v-if=\"state == 1 || state == 3\">\r\n\t\t\t<view>姓名:</view>\r\n\t\t\t<view v-if=\"autophoto == ''\" style=\"color: red;font-weight: 600;\">点击签名</view>\r\n\t\t\t<view v-if=\"autophoto != ''\" style=\"width: 200rpx;height: 100rpx;\"><image :src=autophoto mode=\"widthFix\" style=\"width: 100%;height: 100%;\"></image></view>\r\n\t\t</view>\r\n\t\t<!-- <view>:{{}}</view> -->\r\n\t\t<view class=\"signing\" @click=\"signing()\" v-if=\"state == 1 || state == 3\">签订合同</view>\r\n\t\t<!-- v-if=\"!visible\" -->\r\n\t\t\r\n\t\t<view class=\"wrap\" v-if=\"visible\">\r\n\t\t\t<view class=\"sigh-btns\">\r\n\t\t\t\t<button class=\"btn\" @tap=\"handleCancel\">取消</button>\r\n\t\t\t\t<button class=\"btn\" @tap=\"handleReset\">重写</button>\r\n\t\t\t\t<button class=\"btn\" @tap=\"handleConfirm\">确认</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"sign-box\">\r\n\t\t\t\t<canvas class=\"mycanvas\" :style=\"{width:width +'px',height:height +'px'}\" canvas-id=\"mycanvas\"\r\n\t\t\t\t\t@touchstart=\"touchstart\" @touchmove=\"touchmove\" @touchend=\"touchend\"></canvas>\r\n\t\t\r\n\t\t\t\t<canvas canvas-id=\"camCacnvs\" :style=\"{width:height +'px',height:width +'px'}\" class=\"canvsborder\"></canvas>\r\n\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\r\n\r\n\n\n<script>\r\n\tvar x = 20;\r\n\tvar y = 20;\r\n\tvar tempPoint = []; //用来存放当前画纸上的轨迹点\r\n\tvar id = 0;\r\n\tvar type = '';\r\n\tlet that;\r\n\tlet canvasw;\r\n\tlet canvash;\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tvisible:false,\r\n\t\t\t\tctx: '', //绘图图像\r\n\t\t\t\tpoints: [], //路径点集合,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\tautophoto:\"\",\r\n\t\t\t\tdeid:\"\",\r\n\t\t\t\truletst:\"\",\r\n\t\t\t\tiden:\"\",\r\n\t\t\t\tland_id:\"\",\r\n\t\t\t\tstate:\"\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\t\tconsole.log(option,\"option--logoption\");\r\n\t\t\t\tthat = this;\r\n\t\t\t\tid = option.deid;\r\n\t\t\t\tthis.iden = option.iden;\r\n\t\t\t\tthis.state = option.state;\r\n\t\t\t\tthis.land_id = option.landid;\r\n\t\t\t\ttype = option.type;\r\n\t\t\t\tthis.ctx = uni.createCanvasContext('mycanvas', this); //创建绘图对象\r\n\t\t\t\t//设置画笔样式\r\n\t\t\t\tthis.ctx.lineWidth = 4;\r\n\t\t\t\tthis.ctx.lineCap = 'round';\r\n\t\t\t\tthis.ctx.lineJoin = 'round';\r\n\t\t\t\tthis.deid = option.deid;\r\n\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.width = res.windowWidth * 0.8;\r\n\t\t\t\t\t\tthat.height = res.windowHeight * 0.85;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tthis.getZlContractInfo(option.deid);\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tsingint(){\r\n\t\t\t\ttempPoint = [];\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t},\r\n\t\t\tgetZlContractInfo(info){\r\n\t\t\t\tthis.$http.request({\r\n\t\t\t\t\turl:\"getZlContractInfo\",\r\n\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tid:info\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tconsole.log(res,\"res--2003\")\r\n\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\tthis.ruletst = res.data.data\r\n\t\t\t\t\t\tconsole.log(this.ruletst,\"ruletst\");\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$common.showToast(res.data.info);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsigning(){\r\n\t\t\t\tconsole.log(tempPoint.length,\"tempPoint.length\");\r\n\t\t\t\tvar that = this\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确认后签署完毕',\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tif(that.autophoto == \"\" || !that.autophoto || that.autophoto == undefined){\r\n\t\t\t\t\t\t\t\tthat.$common.showToast(\"请签名后提交\")\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar signcon;\r\n\t\t\t\t\t\t\t\tvar photodata;\r\n\t\t\t\t\t\t\t\tif(that.iden == 1){\r\n\t\t\t\t\t\t\t\t\tsigncon = \"chzfSignContract\"\r\n\t\t\t\t\t\t\t\t\tphotodata = \"signature\"\r\n\t\t\t\t\t\t\t\t}else if(that.iden == 2){\r\n\t\t\t\t\t\t\t\t\tsigncon = \"czfSignContract\"\r\n\t\t\t\t\t\t\t\t\tphotodata = \"l_signature\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthat.$http.request({\r\n\t\t\t\t\t\t\t\t\turl:signcon,\r\n\t\t\t\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\t\t'Content-Type' : 'applicktion/json'\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\t\t\tland_id:that.land_id,\r\n\t\t\t\t\t\t\t\t\t\t[photodata]:that.autophoto\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\t\t\t\tvar that = this\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.info,\r\n\t\t\t\t\t\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\t\t\t\t\tuni.navigateBack({ //返回\r\n\t\t\t\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t},2500)\t\r\n\t\t\t\t\t\t\t\t\t\t// uni.navigateBack({\t\r\n\t\t\t\t\t\t\t\t\t\t// \t delta: 1\r\n\t\t\t\t\t\t\t\t\t\t// )}\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle:res.data.info,\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t// that.$common.showToast(res.data.info)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\tthat.$common.showToast('取消');\r\n\t\t\t\t\t\t\tconsole.log('用户点击取消');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//触摸开始，获取到起点\r\n\t\t\ttouchstart: function(e) {\r\n\t\t\t\tlet startX = e.changedTouches[0].x;\r\n\t\t\t\tlet startY = e.changedTouches[0].y;\r\n\t\t\t\tlet startPoint = {\r\n\t\t\t\t\tX: startX,\r\n\t\t\t\t\tY: startY\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\t\t/* **************************************************\r\n\t\t\t\t    #由于uni对canvas的实现有所不同，这里需要把起点存起来\r\n\t\t\t\t * **************************************************/\r\n\t\t\t\tthis.points.push(startPoint);\r\n\t\t\t\r\n\t\t\t\t//每次触摸开始，开启新的路径\r\n\t\t\t\tthis.ctx.beginPath();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//触摸移动，获取到路径点\r\n\t\t\ttouchmove: function(e) {\r\n\t\t\t\tlet moveX = e.changedTouches[0].x;\r\n\t\t\t\tlet moveY = e.changedTouches[0].y;\r\n\t\t\t\tlet movePoint = {\r\n\t\t\t\t\tX: moveX,\r\n\t\t\t\t\tY: moveY\r\n\t\t\t\t};\r\n\t\t\t\tthis.points.push(movePoint); //存点\r\n\t\t\t\tlet len = this.points.length;\r\n\t\t\t\tif (len >= 2) {\r\n\t\t\t\t\tthis.draw(); //绘制路径\r\n\t\t\t\t}\r\n\t\t\t\ttempPoint.push(movePoint);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 触摸结束，将未绘制的点清空防止对后续路径产生干扰\r\n\t\t\ttouchend: function() {\r\n\t\t\t\tthis.points = [];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t/* ***********************************************\t\r\n\t\t\t#   绘制笔迹\r\n\t\t\t#   1.为保证笔迹实时显示，必须在移动的同时绘制笔迹\r\n\t\t\t#   2.为保证笔迹连续，每次从路径集合中区两个点作为起点（moveTo）和终点(lineTo)\r\n\t\t\t#   3.将上一次的终点作为下一次绘制的起点（即清除第一个点）\r\n\t\t\t************************************************ */\r\n\t\t\tdraw: function() {\r\n\t\t\t\tlet point1 = this.points[0];\r\n\t\t\t\tlet point2 = this.points[1];\r\n\t\t\t\tthis.points.shift();\r\n\t\t\t\tthis.ctx.moveTo(point1.X, point1.Y);\r\n\t\t\t\tthis.ctx.lineTo(point2.X, point2.Y);\r\n\t\t\t\tthis.ctx.stroke();\r\n\t\t\t\tthis.ctx.draw(true);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\thandleCancel() {\r\n\t\t\t\tthat.ctx.clearRect(0, 0, that.width, that.height);\r\n\t\t\t\tthat.ctx.draw(true);\r\n\t\t\t\ttempPoint = [];\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t\t// uni.navigateBack({\r\n\t\t\t\t// \tdelta: 1\r\n\t\t\t\t// });\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//清空画布\r\n\t\t\thandleReset: function() {\r\n\t\t\t\tconsole.log('handleReset');\r\n\t\t\t\tthat.ctx.clearRect(0, 0, that.width, that.height);\r\n\t\t\t\tthat.ctx.draw(true);\r\n\t\t\t\ttempPoint = [];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//将签名笔迹上传到服务器，并将返回来的地址存到本地\r\n\t\t\thandleConfirm: function() {\r\n\t\t\t\tif (tempPoint.length == 0 ||!tempPoint ||tempPoint == undefined ||tempPoint == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先签名',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(tempPoint,\"请先签名\");\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tcanvasId: 'mycanvas',\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet tempPath = res.tempFilePath;\r\n\t\t\t\t\t\tconsole.log(tempPath,\"let tempPathz6\")\r\n\t\t\t\t\t\tconst ctx = uni.createCanvasContext('camCacnvs', that);\r\n\t\t\t\t\t\tctx.translate(0, that.width);\r\n\t\t\t\t\t\tctx.rotate((-90 * Math.PI) / 180);\r\n\t\t\t\t\t\tctx.drawImage(tempPath, 0, 0, that.width, that.height);\r\n\t\t\t\t\t\tctx.draw();\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\r\n\t\t\t\t\t\t\t//保存签名图片到本地\r\n\t\t\t\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\t\t\t\t\tcanvasId: 'camCacnvs',\r\n\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res, \"success-log\")\r\n\t\t\t\t\t\t\t\t\t\t//这是签名图片文件的本地临时地址\r\n\t\t\t\t\t\t\t\t\t\tif (res.errMsg == \"canvasToTempFilePath:ok\") {\r\n\t\t\t\t\t\t\t\t\t\t\tlet path = res.tempFilePath;\r\n\t\t\t\t\t\t\t\t\t\t\tthat.uploadphoto(path);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('fail', err);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tuploadphoto(res) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: 'https://tdpm.shningmi.com/applet/uploads',\r\n\t\t\t\t\tfilePath: res,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tsuccess: (uploadFileRes) => {\r\n\t\t\t\t\t\tvar data = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\t\t// console.log(uploadFileRes, \"uploadFileRes图片查看\");\r\n\t\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\t\tthat.autophoto = data.data.url;\r\n\t\t\t\t\t\t\tthat.visible = false;\r\n\t\t\t\t\t\t\tconsole.log(data,\"data图片查看\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.log(\"失败\");\r\n\t\t\t\t\t\t\tthat.$common.showToast(data.info)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\t.graph{\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tmargin: 20rpx auto;\r\n\t}\r\n\t.l_signature{\r\n\t\twidth: auto;\r\n\t\talign-items: center;\r\n\t\theight: 80rpx;\r\n\t}\r\n\t.l_signature image{\r\n\t\twidth: 120rpx;\r\n\t\theight: 60rpx;\r\n\t}\r\n\t.signature{\r\n\t\twidth: auto;\r\n\t\theight: 80rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\t\r\n\t.signature image{\r\n\t\talign-items: center;\r\n\t\twidth: 120rpx;\r\n\t\theight: 60rpx;\r\n\t}\r\n\t.flex{\r\n\t\tdisplay: flex;\r\n\t}\r\n\t.Mask{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\tz-index: 99;\r\n\t\tbackground-color: #FFFFFF;\r\n\t}\r\n\t.signing{\r\n\t\twidth: 672rpx;\r\n\t\theight: 81rpx;\r\n\t\tline-height: 81rpx;\r\n\t\tmargin: 8.5rpx auto;\r\n\t\tbackground: #64B067;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-family: PingFang SC;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #FFFFFF;\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 130rpx;\r\n\t}\r\n\t\r\n\t.wrap{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tz-index: 100;\r\n\t}\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\t\r\n\t.sign-box {\r\n\t\twidth: 80%;\r\n\t\theight: 90%;\r\n\t\tmargin: auto;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.sign-view {\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.sigh-btns {\r\n\t\theight: 100%;\r\n\t\tmargin: auto;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\t\r\n\t.btn {\r\n\t\tmargin: auto;\r\n\t\tpadding: 8rpx;\r\n\t\ttransform: rotate(90deg);\r\n\t\tborder: grey 1rpx solid;\r\n\t}\r\n\t\r\n\t.mycanvas {\r\n\t\tmargin: auto 0rpx;\r\n\t\tbackground-color: #ececec;\r\n\t}\r\n\t\r\n\t.canvsborder {\r\n\t\tborder: 1rpx solid #333;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 10000rpx;\r\n\t}\r\n\t.title{\r\n\t\tfont-size: 38rpx;\r\n\t\tcolor: 000;\r\n\t\tfont-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;\r\n\t\twidth: 100%;\r\n\t\tmargin: 50rpx auto;\r\n\t\ttext-align: center;\r\n\t}\n</style>","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contract.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./contract.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1676877202159\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}