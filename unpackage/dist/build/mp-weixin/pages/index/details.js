(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/details"],{"14f5":function(t,e,a){"use strict";var n=a("b9dd"),i=a.n(n);i.a},4827:function(t,e,a){"use strict";a.r(e);var n=a("6e37"),i=a("b0de");for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("9389"),a("e018"),a("14f5");var d,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"1951281a",null,!1,n["a"],d);e["default"]=c.exports},6869:function(t,e,a){"use strict";(function(t){a("2277");n(a("66fd"));var e=n(a("4827"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=a,t(e.default)}).call(this,a("543d")["createPage"])},"6e37":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"6f92":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{listItem:"",end_time:{day:"",hou:"",min:"",sec:""},areaTxt:"",areaShow:!1,visible:!1,cjrecord:"",ajudge:"1",land_id:"",res:"",log:"",lat:"",scene:""}},onLoad:function(t){this.details(t.deid),console.log(t.deid,"option.deid"),this.land_id=t.deid,this.bidRecord(t.deid)},onShareAppMessage:function(t){console.log("options??",t);var e=this,a={title:e.listItem.name,path:"/pages/index/details?deid="+n.id,imageUrl:"",success:function(t){"shareAppMessage:ok"==t.errMsg?e.$common.showLoading("转发成功了!"):e.$common.showLoading("转发失败")},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}};if("button"==t.from){var n=t.target.dataset;a.path="/pages/index/details?deid="+n.id}return a},onShow:function(){this.getAuctionStatus()},methods:{getAuctionStatus:function(){var t=this;this.$http.request({url:"getAuctionStatus",method:"GET",header:{"Content-Type":"applicktion/json"}}).then((function(e){t.scene=e.data.data.data}))},dialogue:function(){var t=this;"拍卖中"==this.listItem.auction_status.name?this.$http.request({url:"isMargin",method:"GET",header:{"Content-Type":"applicktion/json"},data:{land_id:this.land_id}}).then((function(e){202==e.data.code?t.visible=!0:200==e.data.code?t.areaShow=!0:that.$common.showToast(e.data.info)})):this.$common.showToast(this.listItem.auction_status.name)},cancelAdd:function(){this.areaShow=!1},confirmAdd:function(){var e=this;t.showModal({title:"提示",content:"确认竞拍吗?",success:function(t){if(t.confirm){if(!e.areaTxt||0!=isNaN(e.areaTxt))return void e.$common.showToast("请输入数字拍卖金额");console.log(e.land_id,"that.land_id"),e.$http.request({url:"addLandBid",method:"POST",header:{"Content-Type":"applicktion/json"},data:{land_id:e.land_id,price:e.areaTxt}}).then((function(t){200==t.data.code?(e.bidRecord(e.land_id),e.details(e.land_id),e.$common.showToast(t.data.info)):e.$common.showToast(t.data.info),e.areaShow=!1}))}else t.cancel&&(e.areaShow=!1,e.$common.showToast("取消"))}})},jumprule:function(){this.$common.navigateTo("/pages/index/rule?deid="+this.land_id+"&state=1")},paymentBond:function(){var t=this;this.$http.request({url:"isAgreeRule",method:"GET",header:{"Content-Type":"applicktion/json"},data:{land_id:this.land_id}}).then((function(e){console.log(e.data.code,e,"res.data.code--land_id"),202==e.data.code?t.$common.navigateTo("/pages/index/rule?deid="+t.land_id+"&state=2"):200==e.data.code?(console.log(e,"已经同意"),t.addMargin()):t.$common.showToast(e.data.info)}))},addMargin:function(){var e=this;this.$http.request({url:"addMargin",method:"POST",header:{"Content-Type":"applicktion/json"},data:{land_id:this.land_id}}).then((function(a){200==a.data.code?e.ordernumber(a.data.data.order_no):(e.visible=!1,t.showToast({title:a.data.info,icon:"none",duration:3500}))}))},ordernumber:function(e){var a=this;this.$http.request({url:"preparedPay",method:"POST",header:{"Content-type":"application/x-www-form-urlencoded"},data:{order_no:e}}).then((function(e){var n=a;if(201==e.data.code&&n.$common.showToast(e.data.info),200==e.data.code){var i=e.data.data;t.requestPayment({provider:"wxpay",timeStamp:i.timeStamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.sign,success:function(e){t.showToast({title:"支付成功!",duration:2e3}),n.visible=!1},fail:function(e){t.showToast({title:"支付失败",duration:2e3,icon:"none"})}})}else n.$common.showToast(e.data.info)}))},participate:function(){this.visible=!0},cancel:function(){this.visible=!1},seeall:function(){1==this.ajudge?this.$common.showToast("这里是全部出价记录了"):2==this.ajudge&&this.$common.navigateTo("../index/morerecord?id="+this.land_id)},bidRecord:function(t){var e=this;this.$http.request({url:"getLandBidLst",method:"GET",header:{"Content-Type":"applicktion/json"},data:{land_id:t,page:"1",limit:"10"}}).then((function(t){200==t.data.code?(t.data.data.data.forEach((function(t){t.price=e.$common.moneysion(t.price)})),e.cjrecord=t.data.data.data,t.data.data.data.length>3&&(e.ajudge=2)):e.$common.showToast(t.data.info)}))},setTime:function(){var t=this;t.countdown(),setInterval((function(){t.countdown()}),1e3)},countdown:function(t){var e=(new Date).getTime(),a=new Date(this.listItem.end_time).getTime(),n={};if(a-e>0){var i=(a-e)/1e3,o=parseInt(i/86400),d=parseInt(i%86400/3600),s=parseInt(i%86400%3600/60),c=parseInt(i%86400%3600%60);n={day:this.timeFormat(o),hou:this.timeFormat(d),min:this.timeFormat(s),sec:this.timeFormat(c)}}else n={day:"00",hou:"00",min:"00",sec:"00"};this.end_time.day=n.day,this.end_time.hou=n.hou,this.end_time.min=n.min,this.end_time.sec=n.sec,this.ecd=n.sec},timeFormat:function(t){return t<10?"0"+t:t},details:function(e){var a=this;t.showLoading({title:"加载中..."}),this.$http.request({url:"getLandInfo",method:"GET",header:{"Content-Type":"multipart/form-data"},data:{id:e}}).then((function(e){200==e.data.code?(e.data.data.curr_price=a.$common.moneysion(e.data.data.curr_price),a.listItem=e.data.data,console.log(a.listItem,"this.listItem"),a.setTime()):a.$common.showToast(e.data.info),t.hideLoading()}))},handleMapLocation:function(){console.log("进入导航");var e=Number(this.listItem.lat),a=Number(this.listItem.lng),n=this.listItem.region[0]+this.listItem.region[1]+this.listItem.region[2];t.openLocation({latitude:e,longitude:a,address:n,scale:18,success:function(){console.log("成功的回调success")}})}}};e.default=a}).call(this,a("543d")["default"])},"72a5":function(t,e,a){},9389:function(t,e,a){"use strict";var n=a("d295"),i=a.n(n);i.a},b0de:function(t,e,a){"use strict";a.r(e);var n=a("6f92"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},b9dd:function(t,e,a){},d295:function(t,e,a){},e018:function(t,e,a){"use strict";var n=a("72a5"),i=a.n(n);i.a}},[["6869","common/runtime","common/vendor"]]]);